# ãºãŸã¼ãƒ¼ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ãƒãƒƒãƒ—

**æœ€çµ‚æ›´æ–°æ—¥**: 2025-11-06

> ğŸ“– é–‹ç™ºãƒ«ãƒ¼ãƒ«ãƒ»ã‚³ãƒãƒ³ãƒ‰è©³ç´°ã¯ [CLAUDE.md](CLAUDE.md) ã‚’å‚ç…§

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“æ§‹é€ 

```
petaboo/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/              # Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Port: 7593)
â”‚   â”œâ”€â”€ api/              # Hono API ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Port: 7594)
â”‚   â””â”€â”€ admin/            # ç®¡ç†ç”»é¢ï¼ˆå°†æ¥çš„ã«ä½¿ç”¨ï¼‰
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/               # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ typescript-config/ # å…±é€šTypeScriptè¨­å®š
â”‚   â””â”€â”€ eslint-config/    # å…±é€šESLintè¨­å®š
â”œâ”€â”€ .claude/              # Claudeé–‹ç™ºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ CLAUDE.md         # é–‹ç™ºä»•æ§˜æ›¸ï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
â”‚   â”œâ”€â”€ æ§‹é€ ãƒãƒƒãƒ—.md      # æœ¬ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ é–‹ç™ºãƒ¡ãƒ¢/         # æŠ€è¡“ãƒ¡ãƒ¢ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨˜éŒ²
â”‚   â”œâ”€â”€ è¨ˆç”»æ›¸/           # å®Ÿè£…è¨ˆç”»æ›¸ï¼ˆé€²è¡Œä¸­ï¼‰
â”‚   â””â”€â”€ å®Œäº†æ¸ˆè¨ˆç”»æ›¸/     # å®Œäº†ã—ãŸè¨ˆç”»æ›¸ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
â”œâ”€â”€ turbo.json            # Turborepoè¨­å®š
â”œâ”€â”€ filter-logs.sh        # ãƒ­ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ web.log / api.log     # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°
```

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€  (`apps/api/src/db/schema/`)

```
schema/
â”œâ”€â”€ users.ts              # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
â”œâ”€â”€ memos.ts              # ãƒ¡ãƒ¢ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ tasks.ts              # ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ boards.ts             # ãƒœãƒ¼ãƒ‰ï¼ˆã‚«ãƒ³ãƒãƒ³ï¼‰
â”œâ”€â”€ categories.ts         # ã‚«ãƒ†ã‚´ãƒª
â”œâ”€â”€ board-categories.ts   # ãƒœãƒ¼ãƒ‰ã‚«ãƒ†ã‚´ãƒª
â”œâ”€â”€ tags.ts               # ã‚¿ã‚°
â”œâ”€â”€ attachments.ts        # æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ user-preferences.ts   # ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š
â””â”€â”€ team/                 # ãƒãƒ¼ãƒ é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ç¾¤
    â”œâ”€â”€ teams.ts
    â”œâ”€â”€ team-members.ts
    â”œâ”€â”€ team-invitations.ts
    â”œâ”€â”€ team-activities.ts
    â”œâ”€â”€ team-notifications.ts
    â”œâ”€â”€ slack-configs.ts
    â””â”€â”€ comments.ts
```

---

## ğŸ›£ï¸ APIæ§‹é€  (`apps/api/src/routes/`)

**ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ**: `worker-d1.ts` â† å…¨ãƒ«ãƒ¼ãƒˆã‚’ã“ã“ã§ç™»éŒ²

```
routes/
â”œâ”€â”€ users/                # /users/* - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”œâ”€â”€ memos/                # /memos/* - ãƒ¡ãƒ¢CRUD
â”œâ”€â”€ tasks/                # /tasks/* - ã‚¿ã‚¹ã‚¯CRUD
â”œâ”€â”€ boards/               # /boards/* - ãƒœãƒ¼ãƒ‰CRUD
â”‚   â””â”€â”€ slack-config/     # Slacké€£æºè¨­å®š
â”œâ”€â”€ categories/           # /categories/* - ã‚«ãƒ†ã‚´ãƒªç®¡ç†
â”œâ”€â”€ board-categories/     # /board-categories/* - ãƒœãƒ¼ãƒ‰ã‚«ãƒ†ã‚´ãƒª
â”œâ”€â”€ tags/                 # /tags/* - ã‚¿ã‚°ç®¡ç†
â”œâ”€â”€ taggings/             # /taggings/* - ã‚¿ã‚°ä»˜ã‘
â”œâ”€â”€ attachments/          # /attachments/* - æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ user-preferences/     # /user-preferences/* - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š
â”œâ”€â”€ teams/                # /teams/* - ãƒãƒ¼ãƒ ç®¡ç†
â”‚   â””â”€â”€ slack-config/     # Slacké€£æºè¨­å®š
â”œâ”€â”€ team-activities/      # /team-activities/* - ãƒãƒ¼ãƒ æ´»å‹•å±¥æ­´
â”œâ”€â”€ notifications/        # /notifications/* - é€šçŸ¥
â”œâ”€â”€ comments/             # /comments/* - ã‚³ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ webhooks/             # /webhooks/* - Webhook

å„ãƒ«ãƒ¼ãƒˆã®æ§‹æˆ:
â”œâ”€â”€ route.ts              # ãƒ«ãƒ¼ãƒˆå®šç¾©ï¼ˆOpenAPIï¼‰
â””â”€â”€ api.ts                # å®Ÿè£…ãƒ­ã‚¸ãƒƒã‚¯
```

---

## ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹é€  (`apps/web/src/`)

```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/            # èªè¨¼é–¢é€£ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ (dashboard)/       # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†ç”»é¢
â”‚   â”œâ”€â”€ api/               # APIãƒ«ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ boards/            # ãƒœãƒ¼ãƒ‰é–¢é€£
â”‚   â”œâ”€â”€ join/              # ãƒãƒ¼ãƒ æ‹›å¾…
â”‚   â”œâ”€â”€ share/             # å…±æœ‰æ©Ÿèƒ½
â”‚   â”œâ”€â”€ team/              # ãƒãƒ¼ãƒ æ©Ÿèƒ½
â”‚   â”œâ”€â”€ layout.tsx         # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ main.tsx           # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ globals.css        # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚
â”œâ”€â”€ components/shared/     # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ2ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â”œâ”€â”€ linkified-text.tsx # ãƒªãƒ³ã‚¯è‡ªå‹•å¤‰æ›ãƒ†ã‚­ã‚¹ãƒˆ
â”‚   â””â”€â”€ url-preview.tsx    # URLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
â”‚
â”œâ”€â”€ hooks/                 # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼ˆ75+ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”œâ”€â”€ contexts/              # React Contextï¼ˆ6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”œâ”€â”€ types/                 # å‹å®šç¾©
â”‚   â”œâ”€â”€ api.ts            # APIå‹ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ common.ts         # å…±é€šå‹ï¼ˆOriginalIdç­‰ï¼‰
â”œâ”€â”€ utils/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ï¼ˆ16ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”œâ”€â”€ lib/                   # å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¨­å®š
â”œâ”€â”€ constants/             # å®šæ•°å®šç¾©
â””â”€â”€ styles/                # ã‚¹ã‚¿ã‚¤ãƒ«é–¢é€£
```

### ğŸ£ hooks/ï¼ˆæ©Ÿèƒ½åˆ¥åˆ†é¡ï¼‰

#### ğŸ”§ ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿æ“ä½œï¼ˆæœ€é‡è¦ï¼‰

- **use-unified-item-operations.ts** - ãƒ¡ãƒ¢ãƒ»ã‚¿ã‚¹ã‚¯ãƒ»ãƒœãƒ¼ãƒ‰ã®çµ±ä¸€CRUDæ“ä½œ
- **use-all-data.ts** - å…¨ãƒ‡ãƒ¼ã‚¿ä¸€æ‹¬å–å¾—
- **use-board-operations.ts** - ãƒœãƒ¼ãƒ‰å°‚ç”¨æ“ä½œ
- **use-deleted-item-operations.ts** - å‰Šé™¤æ¸ˆã¿ã‚¢ã‚¤ãƒ†ãƒ æ“ä½œ

#### ğŸ“¦ å€‹åˆ¥ãƒªã‚½ãƒ¼ã‚¹å–å¾—

- **use-memos.ts** / **use-tasks.ts** / **use-boards.ts** - å€‹äººãƒ‡ãƒ¼ã‚¿
- **use-team-memos.ts** / **use-team-tasks.ts** / **use-team-boards.ts** - ãƒãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿
- **use-tags.ts** / **use-categories.ts** / **use-board-categories.ts**
- **use-attachments.ts** / **use-notifications.ts**

#### ğŸ‘¥ ãƒãƒ¼ãƒ æ©Ÿèƒ½

- **use-teams.ts** / **use-team-detail.ts** / **use-create-team.ts**
- **use-invite-to-team.ts** / **use-join-by-code.ts** / **use-join-requests.ts**
- **use-team-comments.ts** / **use-team-activities.ts** / **use-team-stats.ts**
- **use-kick-member.ts** / **use-manage-join-request.ts**

#### ğŸ—‘ï¸ å‰Šé™¤ãƒ»å¾©å…ƒç³»

- **use-bulk-delete-unified.tsx** - ä¸€æ‹¬å‰Šé™¤ï¼ˆçµ±ä¸€ç‰ˆï¼‰
- **use-bulk-delete-operations.tsx** / **use-bulk-delete-button.ts**
- **use-bulk-animation.tsx** - å‰Šé™¤ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **use-board-bulk-restore.tsx** - ãƒœãƒ¼ãƒ‰ä¸€æ‹¬å¾©å…ƒ
- **use-unified-restoration.ts** - çµ±ä¸€å¾©å…ƒå‡¦ç†
- **use-memo-delete-with-next-selection.ts** - å‰Šé™¤å¾Œã®æ¬¡é¸æŠ
- **use-next-deleted-item-selection.ts** - å‰Šé™¤æ¸ˆã¿ã‚¢ã‚¤ãƒ†ãƒ é¸æŠ

#### ğŸ¯ é¸æŠãƒ»UIçŠ¶æ…‹ç®¡ç†

- **use-multi-selection.ts** / **use-select-all.ts** / **use-board-select-all.ts**
- **use-selection-handlers.ts** / **use-item-deselect.ts**
- **use-board-state.ts** / **use-screen-state.ts** / **use-set-state.ts**
- **use-view-mode-storage.ts** / **use-column-count-storage.ts**

#### ğŸ“ ãƒ•ã‚©ãƒ¼ãƒ ãƒ»ä¿å­˜

- **use-memo-form.ts** - ãƒ¡ãƒ¢ãƒ•ã‚©ãƒ¼ãƒ 
- **use-simple-memo-save.ts** / **use-simple-item-save.ts** - ç°¡æ˜“ä¿å­˜

#### ğŸ”” é€šçŸ¥ãƒ»Slack

- **use-personal-notifier.ts** / **use-simple-team-notifier.ts**
- **use-bulk-process-notifications.tsx** - ä¸€æ‹¬é€šçŸ¥å‡¦ç†
- **use-board-slack-config.ts** / **use-team-slack-config.ts**

#### ğŸ› ï¸ ãã®ä»–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

- **use-global-search.ts** - ã‚°ãƒ­ãƒ¼ãƒãƒ«æ¤œç´¢
- **use-export.ts** - ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- **use-api-sync.ts** / **use-local-storage-sync.ts**
- **use-user-preferences.ts** / **use-user-info.ts** / **use-user.ts**
- **use-ensure-user.ts** - ãƒ¦ãƒ¼ã‚¶ãƒ¼å­˜åœ¨ç¢ºèª
- **useAnimatedCounter.ts** - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
- **ãã®ä»–30+ãƒ•ã‚¡ã‚¤ãƒ«** - ã‚¿ã‚°ä»˜ã‘ã€ãƒœãƒ¼ãƒ‰ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€å‰Šé™¤LIDãªã©

### ğŸŒ contexts/

- **user-preferences-context.tsx** - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šç®¡ç†
- **multi-selection-context.tsx** - è¤‡æ•°é¸æŠçŠ¶æ…‹
- **selector-context.tsx** - ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼çŠ¶æ…‹
- **toast-context.tsx** - ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥
- **team-detail-context.tsx** - ãƒãƒ¼ãƒ è©³ç´°
- **PageVisibilityContext.tsx** - ãƒšãƒ¼ã‚¸å¯è¦–æ€§æ¤œçŸ¥

### ğŸ› ï¸ utils/

#### æ—¥ä»˜ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

- **dateUtils.ts** / **formatDate.ts** - æ—¥ä»˜å‡¦ç†

#### UIãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

- **bulkAnimationUtils.ts** / **deleteAnimation.ts**
- **bulkButtonUtils.ts** / **toggleUtils.ts**

#### URLãƒ»ãƒªãƒ³ã‚¯

- **urlUtils.ts** / **url-detector.tsx** / **linkify.tsx**

#### ãã®ä»–

- **taskUtils.ts** / **userUtils.ts** / **notificationUtils.ts**
- **domUtils.ts** / **screenUtils.ts** / **modeUtils.ts**
- **teamTypeConverter.ts** - ãƒãƒ¼ãƒ å‹å¤‰æ›

---

## ğŸ“š .claude/ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½“ç³»

```
.claude/
â”œâ”€â”€ CLAUDE.md                        # é–‹ç™ºä»•æ§˜æ›¸ï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
â”œâ”€â”€ æ§‹é€ ãƒãƒƒãƒ—.md                     # æœ¬ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ é–‹ç™ºãƒ¡ãƒ¢/                        # æŠ€è¡“ãƒ¡ãƒ¢ãƒ»å•é¡Œè§£æ±ºè¨˜éŒ²
â”‚   â”œâ”€â”€ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯.md
â”‚   â”œâ”€â”€ ãƒ¡ãƒ¢æ§‹é€ ã«ã¤ã„ã¦.md
â”‚   â”œâ”€â”€ ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­è¨ˆã«ã¤ã„ã¦.md
â”‚   â”œâ”€â”€ Refineå®Ÿè£…ã‚¬ã‚¤ãƒ‰.md
â”‚   â””â”€â”€ ã‚·ãƒ³ãƒ—ãƒ«é€šçŸ¥ãƒã‚§ãƒƒã‚¯ä»•æ§˜æ›¸.md
â”œâ”€â”€ è¨ˆç”»æ›¸/                          # å®Ÿè£…è¨ˆç”»æ›¸ï¼ˆé€²è¡Œä¸­ï¼‰
â”œâ”€â”€ å®Œäº†æ¸ˆè¨ˆç”»æ›¸/                    # å®Œäº†ã—ãŸè¨ˆç”»æ›¸ï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼‰
â””â”€â”€ æ¡ä»¶ä»˜ããƒ­ãƒ³ã‚°ãƒãƒ¼ãƒªãƒ³ã‚°è¨­è¨ˆ/     # ç‰¹å®šæ©Ÿèƒ½ã®è¨­è¨ˆæ›¸
```

---

---

## ğŸ”§ APIå†…éƒ¨æ§‹é€  (`apps/api/src/`)

```
src/
â”œâ”€â”€ routes/               # APIãƒ«ãƒ¼ãƒˆï¼ˆå‰è¿°ï¼‰
â”œâ”€â”€ db/
â”‚   â””â”€â”€ schema/          # DBã‚¹ã‚­ãƒ¼ãƒï¼ˆå‰è¿°ï¼‰
â”œâ”€â”€ middleware/          # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”œâ”€â”€ services/
â”‚   â””â”€â”€ email.ts         # ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆResendï¼‰
â”œâ”€â”€ types/               # APIå‹å®šç¾©
â”œâ”€â”€ utils/               # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â””â”€â”€ lib/                 # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¨­å®š
```

---

## ğŸ”„ æ›´æ–°å±¥æ­´

- **2025-11-06**: åˆç‰ˆä½œæˆï¼ˆæ©Ÿèƒ½åˆ¥è©³ç´°ç‰ˆï¼‰
