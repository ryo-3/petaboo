# å€‹äººãƒœãƒ¼ãƒ‰è©³ç´°ãƒ‘ãƒãƒ«æ”¹å–„Plan

> âš ï¸ Codexã«å®Ÿè£…ä¾é ¼ã™ã‚‹éš›ã¯ã€ä»¥ä¸‹ã‚’å³å®ˆã™ã‚‹ã“ã¨ï¼š
>
> - **æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸¸ã”ã¨å†ç”Ÿæˆã•ã›ãªã„ã“ã¨** â†’ Codexã¸ã®ä¾é ¼ã¯å¿…ãš **å·®åˆ†ï¼ˆpatchå½¢å¼ï¼‰** ã§è¡Œã†
> - **æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆãƒ»æ–‡å­—åˆ—ã‚’æ‰±ã†å ´åˆã¯UTF-8å‰æã§ä¾é ¼ã™ã‚‹ã“ã¨** â†’ æ–‡å­—åŒ–ã‘é˜²æ­¢ã®ãŸã‚æ˜è¨˜ã™ã‚‹
> - **Codexã« git add / git commit ã‚’å®Ÿè¡Œã•ã›ãªã„ã“ã¨**
> - **å®Œäº†ã—ãŸå ´åˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’`.claude/fixed-plans` ã«ç§»å‹•ã™ã‚‹**

## ğŸ“‹ ç›®çš„

å€‹äººå´ãƒœãƒ¼ãƒ‰è©³ç´°ç”»é¢ï¼ˆ`board-detail-screen.tsx`ï¼‰ã®ä»¥ä¸‹2ã¤ã®å•é¡Œã‚’ä¿®æ­£ï¼š

1. **å•é¡Œ1**: ã‚¢ã‚¤ãƒ†ãƒ é¸æŠæ™‚ã«ã€ãƒ¡ãƒ¢ä¸€è¦§ã¨ã‚¿ã‚¹ã‚¯ä¸€è¦§ãŒä¸¡æ–¹è¡¨ç¤ºã•ã‚Œã‚‹
   - **ã‚ã‚‹ã¹ãå§¿**: ãƒ¡ãƒ¢é¸æŠæ™‚ã¯ãƒ¡ãƒ¢ä¸€è¦§ã®ã¿ã€ã‚¿ã‚¹ã‚¯é¸æŠæ™‚ã¯ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã¿è¡¨ç¤º

2. **å•é¡Œ2**: ãƒ‘ãƒãƒ«å¹…ãŒå›ºå®šï¼ˆ`w-[44%]`ï¼‰ã§ãƒªã‚µã‚¤ã‚ºã§ããªã„
   - **ã‚ã‚‹ã¹ãå§¿**: ãƒãƒ¼ãƒ å´ã¨åŒæ§˜ã«ãƒªã‚µã‚¤ã‚ºå¯èƒ½ãªãƒ‘ãƒãƒ«

## ğŸ” èª¿æŸ»çµæœ

### ãƒãƒ¼ãƒ å´ãƒœãƒ¼ãƒ‰è©³ç´°ï¼ˆboard-detail-screen-3panel.tsxï¼‰

**é¸æŠæ™‚**ï¼ˆselectedMemo/selectedTask ãŒã‚ã‚‹æ™‚ï¼‰:

```typescript
<ResizablePanelGroup direction="horizontal" onLayout={handlePanelResizeSelected}>
  {showListPanel && (
    <ResizablePanel id="selected-list" defaultSize={sizes.list}>
      {selectedTask ? (
        <BoardTaskSection ... />  // ã‚¿ã‚¹ã‚¯é¸æŠæ™‚: ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã¿
      ) : selectedMemo ? (
        <BoardMemoSection ... />  // ãƒ¡ãƒ¢é¸æŠæ™‚: ãƒ¡ãƒ¢ä¸€è¦§ã®ã¿
      ) : null}
    </ResizablePanel>
  )}
  <ResizableHandle />
  {showDetailPanel && (
    <ResizablePanel id="selected-detail" defaultSize={sizes.detail}>
      {selectedMemo ? <MemoEditor .../> : selectedTask ? <TaskEditor .../> : null}
    </ResizablePanel>
  )}
  <ResizableHandle />
  {showCommentPanel && (
    <ResizablePanel id="selected-comment" defaultSize={sizes.comment}>
      <CommentSection ... />
    </ResizablePanel>
  )}
</ResizablePanelGroup>
```

- 3ãƒ‘ãƒãƒ«æ§‹æˆ: ä¸€è¦§ï½œè©³ç´°ï½œã‚³ãƒ¡ãƒ³ãƒˆ
- localStorage: `team-board-panel-sizes-selected`
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚µã‚¤ã‚º: `{ left: 25, center: 45, right: 30 }`ï¼ˆ3ãƒ‘ãƒãƒ«æ™‚ï¼‰

**éé¸æŠæ™‚**ï¼ˆä½•ã‚‚é¸æŠã•ã‚Œã¦ã„ãªã„æ™‚ï¼‰:

```typescript
<ResizablePanelGroup direction="horizontal" onLayout={handlePanelResizeUnselected}>
  {showMemo && (
    <ResizablePanel id="unselected-memo" defaultSize={sizes.memo}>
      <BoardMemoSection ... />
    </ResizablePanel>
  )}
  <ResizableHandle />
  {showTask && (
    <ResizablePanel id="unselected-task" defaultSize={sizes.task}>
      <BoardTaskSection ... />
    </ResizablePanel>
  )}
  <ResizableHandle />
  {showComment && (
    <ResizablePanel id="unselected-comment" defaultSize={sizes.comment}>
      <CommentSection ... />
    </ResizablePanel>
  )}
</ResizablePanelGroup>
```

- localStorage: `team-board-panel-sizes-unselected`
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚µã‚¤ã‚º: `{ left: 33, center: 34, right: 33 }`ï¼ˆ3ãƒ‘ãƒãƒ«æ™‚ï¼‰

### å€‹äººå´ãƒœãƒ¼ãƒ‰è©³ç´°ï¼ˆboard-detail-screen.tsxï¼‰- ç¾åœ¨ã®å®Ÿè£…

**ç¾åœ¨ã®æ§‹é€ **:

```typescript
<div className="flex h-full">
  {/* å·¦ãƒ‘ãƒãƒ«: å›ºå®šå¹… w-[44%] */}
  <div className="w-[44%] border-r">
    <div className="grid grid-cols-1 lg:grid-cols-2">
      <BoardMemoSection ... />   {/* å¸¸ã«è¡¨ç¤º */}
      <BoardTaskSection ... />   {/* å¸¸ã«è¡¨ç¤º */}
    </div>
  </div>

  {/* å³ãƒ‘ãƒãƒ«: flex-1 */}
  {(selectedMemo || selectedTask || rightPanelMode) && (
    <div className="flex-1">
      <BoardRightPanel ... />
    </div>
  )}
</div>
```

**å•é¡Œç‚¹**:

- ãƒ¡ãƒ¢ãƒ»ã‚¿ã‚¹ã‚¯ä¸€è¦§ãŒå¸¸ã«ä¸¡æ–¹è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆé¸æŠã«å¿œã˜ãŸåˆ‡ã‚Šæ›¿ãˆãªã—ï¼‰
- å›ºå®šå¹…ã§ãƒªã‚µã‚¤ã‚ºä¸å¯
- rightPanelModeï¼ˆãƒ¡ãƒ¢ä¸€è¦§/ã‚¿ã‚¹ã‚¯ä¸€è¦§è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ï¼‰ã¸ã®å¯¾å¿œãŒä¸ååˆ†

## ğŸ¯ å®Ÿè£…æ–¹é‡

### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

å€‹äººå´ã‚‚ãƒãƒ¼ãƒ å´ã¨åŒã˜æ§‹é€ ã«ã™ã‚‹ï¼š

- **é¸æŠæ™‚**: ResizablePanelGroup ã§ ä¸€è¦§ï½œè©³ç´° ã®2ãƒ‘ãƒãƒ«æ§‹æˆ
- **éé¸æŠæ™‚**: ResizablePanelGroup ã§ ãƒ¡ãƒ¢ï½œã‚¿ã‚¹ã‚¯ ã®2ãƒ‘ãƒãƒ«æ§‹æˆ

ãŸã ã—ã€å€‹äººå´ã«ã¯**ã‚³ãƒ¡ãƒ³ãƒˆãƒ‘ãƒãƒ«ãŒãªã„**ãŸã‚ã€ãƒãƒ¼ãƒ å´ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã€‚

### çŠ¶æ…‹ç®¡ç†

ãƒãƒ¼ãƒ å´ã¨åŒæ§˜ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç®¡ç†ã‚’å®Ÿè£…ï¼š

- `personal-board-panel-sizes-selected`: é¸æŠæ™‚ã®ãƒ‘ãƒãƒ«ã‚µã‚¤ã‚º
- `personal-board-panel-sizes-unselected`: éé¸æŠæ™‚ã®ãƒ‘ãƒãƒ«ã‚µã‚¤ã‚º

çµ„ã¿åˆã‚ã›ã”ã¨ã«ã‚µã‚¤ã‚ºã‚’ä¿å­˜ï¼š

- é¸æŠæ™‚: `"2panel"`, `"list-only"`, `"detail-only"`
- éé¸æŠæ™‚: `"2panel"`, `"memo-only"`, `"task-only"`

## ğŸ“ å®Ÿè£…æ‰‹é †

### 1. ResizablePanel ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: `apps/web/components/screens/board-detail-screen.tsx`

```typescript
// è¿½åŠ 
import {
  ResizablePanelGroup,
  ResizablePanel,
  ResizableHandle,
} from "@/components/ui/base/resizable";
```

### 2. ãƒ‘ãƒãƒ«ã‚µã‚¤ã‚ºç®¡ç†ã® state è¿½åŠ 

ãƒãƒ¼ãƒ å´ï¼ˆlines 810-872ï¼‰ã¨åŒæ§˜ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ï¼š

```typescript
// ãƒ‘ãƒãƒ«å¹…ç®¡ç†
const resizeTimerSelected = useRef<NodeJS.Timeout | null>(null);
const resizeTimerUnselected = useRef<NodeJS.Timeout | null>(null);
const mountCountSelected = useRef(0);
const mountCountUnselected = useRef(0);

// ãƒ‘ãƒãƒ«å¹…ä¿å­˜ã®å‹å®šç¾©
type PanelSizesMap = {
  [key: string]: { left: number; right: number };
};

// é¸æŠæ™‚ã®ãƒ‘ãƒãƒ«å¹…ã‚’å–å¾—ï¼ˆlocalStorageã‹ã‚‰å¾©å…ƒï¼‰
const [panelSizesSelectedMap, setPanelSizesSelectedMap] =
  useState<PanelSizesMap>(() => {
    if (typeof window !== "undefined") {
      const saved = localStorage.getItem("personal-board-panel-sizes-selected");
      if (saved) {
        try {
          return JSON.parse(saved);
        } catch {
          // ãƒ‘ãƒ¼ã‚¹å¤±æ•—æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
        }
      }
    }
    return {
      "2panel": { left: 35, right: 65 }, // ä¸€è¦§35% | è©³ç´°65%
      "list-only": { left: 100, right: 0 }, // ä¸€è¦§ã®ã¿
      "detail-only": { left: 0, right: 100 }, // è©³ç´°ã®ã¿
    };
  });

// éé¸æŠæ™‚ã®ãƒ‘ãƒãƒ«å¹…ã‚’å–å¾—ï¼ˆlocalStorageã‹ã‚‰å¾©å…ƒï¼‰
const [panelSizesUnselectedMap, setPanelSizesUnselectedMap] =
  useState<PanelSizesMap>(() => {
    if (typeof window !== "undefined") {
      const saved = localStorage.getItem(
        "personal-board-panel-sizes-unselected",
      );
      if (saved) {
        try {
          return JSON.parse(saved);
        } catch {
          // ãƒ‘ãƒ¼ã‚¹å¤±æ•—æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
        }
      }
    }
    return {
      "2panel": { left: 50, right: 50 }, // ãƒ¡ãƒ¢50% | ã‚¿ã‚¹ã‚¯50%
      "memo-only": { left: 100, right: 0 }, // ãƒ¡ãƒ¢ã®ã¿
      "task-only": { left: 0, right: 100 }, // ã‚¿ã‚¹ã‚¯ã®ã¿
    };
  });

// é¸æŠçŠ¶æ…‹ãŒå¤‰ã‚ã£ãŸã‚‰ãƒã‚¦ãƒ³ãƒˆã‚«ã‚¦ãƒ³ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ
useEffect(() => {
  mountCountSelected.current = 0;
}, [selectedMemo?.originalId, selectedTask?.originalId]);

useEffect(() => {
  if (!selectedMemo && !selectedTask) {
    mountCountUnselected.current = 0;
  }
}, [selectedMemo, selectedTask]);
```

### 3. ãƒªã‚µã‚¤ã‚ºãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¿½åŠ 

```typescript
// é¸æŠæ™‚ã®ãƒ‘ãƒãƒ«ãƒªã‚µã‚¤ã‚ºãƒãƒ³ãƒ‰ãƒ©ãƒ¼
const handlePanelResizeSelected = useCallback(
  (sizes: number[]) => {
    mountCountSelected.current++;
    if (mountCountSelected.current <= 1) {
      return; // åˆå›ãƒã‚¦ãƒ³ãƒˆæ™‚ã¯ã‚¹ã‚­ãƒƒãƒ—
    }

    if (sizes.length >= 2) {
      const showList =
        rightPanelMode === "memo-list" ||
        rightPanelMode === "task-list" ||
        (!rightPanelMode && (selectedMemo || selectedTask));
      const showDetail = selectedMemo || selectedTask;

      const combinationKey =
        showList && showDetail
          ? "2panel"
          : showList
            ? "list-only"
            : "detail-only";

      const newSizes = {
        left: sizes[0] ?? 0,
        right: sizes[1] ?? 0,
      };

      setPanelSizesSelectedMap((prev) => {
        const updated = { ...prev, [combinationKey]: newSizes };

        if (resizeTimerSelected.current) {
          clearTimeout(resizeTimerSelected.current);
        }
        resizeTimerSelected.current = setTimeout(() => {
          localStorage.setItem(
            "personal-board-panel-sizes-selected",
            JSON.stringify(updated),
          );
        }, 500);

        return updated;
      });
    }
  },
  [rightPanelMode, selectedMemo, selectedTask],
);

// éé¸æŠæ™‚ã®ãƒ‘ãƒãƒ«ãƒªã‚µã‚¤ã‚ºãƒãƒ³ãƒ‰ãƒ©ãƒ¼
const handlePanelResizeUnselected = useCallback(
  (sizes: number[]) => {
    mountCountUnselected.current++;
    if (mountCountUnselected.current <= 1) {
      return; // åˆå›ãƒã‚¦ãƒ³ãƒˆæ™‚ã¯ã‚¹ã‚­ãƒƒãƒ—
    }

    if (sizes.length >= 2) {
      const combinationKey =
        showMemo && showTask ? "2panel" : showMemo ? "memo-only" : "task-only";

      const newSizes = {
        left: sizes[0] ?? 0,
        right: sizes[1] ?? 0,
      };

      setPanelSizesUnselectedMap((prev) => {
        const updated = { ...prev, [combinationKey]: newSizes };

        if (resizeTimerUnselected.current) {
          clearTimeout(resizeTimerUnselected.current);
        }
        resizeTimerUnselected.current = setTimeout(() => {
          localStorage.setItem(
            "personal-board-panel-sizes-unselected",
            JSON.stringify(updated),
          );
        }, 500);

        return updated;
      });
    }
  },
  [showMemo, showTask],
);
```

### 4. ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°éƒ¨åˆ†ã®æ›¸ãæ›ãˆ

**ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰ï¼ˆlines 646-786ï¼‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´**:

```typescript
return (
  <div className="flex h-full bg-white overflow-hidden">
    {(selectedMemo || selectedTask || rightPanelMode) ? (
      /* é¸æŠæ™‚: ä¸€è¦§ | è©³ç´° ã®2ãƒ‘ãƒãƒ«æ§‹æˆ */
      (() => {
        const showList = rightPanelMode === "memo-list" || rightPanelMode === "task-list" || (!rightPanelMode && (selectedMemo || selectedTask));
        const showDetail = selectedMemo || selectedTask;

        const combinationKey = showList && showDetail ? "2panel" : showList ? "list-only" : "detail-only";
        const savedSizes = panelSizesSelectedMap[combinationKey] || panelSizesSelectedMap["2panel"] || { left: 35, right: 65 };

        const sizes = {
          list: showList ? savedSizes.left : 0,
          detail: showDetail ? savedSizes.right : 0,
        };

        const listOrder = showList ? 1 : 0;
        const detailOrder = showDetail ? (showList ? 2 : 1) : 0;
        const visiblePanels = (showList ? 1 : 0) + (showDetail ? 1 : 0);

        return (
          <ResizablePanelGroup
            key={`selected-${visiblePanels}panel`}
            direction="horizontal"
            className="flex-1"
            onLayout={handlePanelResizeSelected}
          >
            {/* ä¸€è¦§ãƒ‘ãƒãƒ« */}
            {showList && (
              <>
                <ResizablePanel
                  id="selected-list"
                  order={listOrder}
                  defaultSize={sizes.list}
                  minSize={25}
                  maxSize={75}
                  className="rounded-lg bg-white flex flex-col min-h-0 border-r border-gray-200"
                >
                  <div className="flex flex-col h-full pl-4 pr-2">
                    {rightPanelMode === "memo-list" ? (
                      /* rightPanelModeãŒmemo-listã®å ´åˆ: ãƒ¡ãƒ¢ä¸€è¦§ã®ã¿ */
                      <BoardMemoSection ... />
                    ) : rightPanelMode === "task-list" ? (
                      /* rightPanelModeãŒtask-listã®å ´åˆ: ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã¿ */
                      <BoardTaskSection ... />
                    ) : selectedTask ? (
                      /* ã‚¿ã‚¹ã‚¯é¸æŠæ™‚: ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã¿ */
                      <BoardTaskSection ... />
                    ) : selectedMemo ? (
                      /* ãƒ¡ãƒ¢é¸æŠæ™‚: ãƒ¡ãƒ¢ä¸€è¦§ã®ã¿ */
                      <BoardMemoSection ... />
                    ) : null}
                  </div>
                </ResizablePanel>
                {showDetail && <ResizableHandle />}
              </>
            )}

            {/* è©³ç´°ãƒ‘ãƒãƒ« */}
            {showDetail && (
              <ResizablePanel
                id="selected-detail"
                order={detailOrder}
                defaultSize={sizes.detail}
                minSize={25}
                className="rounded-lg bg-white flex flex-col min-h-0"
              >
                <div className="flex-1 flex flex-col relative">
                  <BoardRightPanel
                    isOpen={true}
                    boardId={boardId}
                    selectedMemo={selectedMemo}
                    selectedTask={selectedTask}
                    rightPanelMode={rightPanelMode}
                    activeMemoTab={activeMemoTab}
                    selectedItemsFromList={selectedItemsFromList}
                    allMemos={boardMemos}
                    allTasks={boardTasks}
                    allBoards={allBoards || []}
                    allTaggings={safeAllTaggings as Tagging[]}
                    allBoardItems={safeAllBoardItems}
                    itemBoards={completeItemBoards}
                    onClose={
                      rightPanelMode
                        ? () => handleCloseRightPanel(onClearSelection)
                        : handleCloseDetail
                    }
                    onSelectMemo={onSelectMemo}
                    onSelectTask={onSelectTask}
                    onAddSelectedItems={handleAddSelectedItems}
                    onToggleItemSelection={handleToggleItemSelection}
                    onMemoDeleteAndSelectNext={handleMemoDeleteAndSelectNext}
                    onTaskDeleteAndSelectNext={handleTaskDeleteAndSelectNext}
                    onDeletedMemoDeleteAndSelectNext={handleDeletedMemoDeleteAndSelectNext}
                    onDeletedTaskDeleteAndSelectNext={handleDeletedTaskDeleteAndSelectNext}
                    onMemoRestoreAndSelectNext={handleMemoRestoreAndSelectNext}
                    onTaskRestoreAndSelectNext={handleTaskRestoreAndSelectNext}
                    onAddMemoToBoard={handleAddMemoToBoard}
                    onAddTaskToBoard={handleAddTaskToBoard}
                  />
                </div>
              </ResizablePanel>
            )}
          </ResizablePanelGroup>
        );
      })()
    ) : (
      /* éé¸æŠæ™‚: ãƒ¡ãƒ¢ | ã‚¿ã‚¹ã‚¯ ã®2ãƒ‘ãƒãƒ«æ§‹æˆ */
      (() => {
        const combinationKey = showMemo && showTask ? "2panel" : showMemo ? "memo-only" : "task-only";
        const savedSizes = panelSizesUnselectedMap[combinationKey] || panelSizesUnselectedMap["2panel"] || { left: 50, right: 50 };

        const sizes = {
          memo: showMemo ? savedSizes.left : 0,
          task: showTask ? savedSizes.right : 0,
        };

        const memoOrder = showMemo ? 1 : 0;
        const taskOrder = showTask ? (showMemo ? 2 : 1) : 0;
        const visiblePanels = (showMemo ? 1 : 0) + (showTask ? 1 : 0);

        return (
          <ResizablePanelGroup
            key={`unselected-${visiblePanels}panel`}
            direction="horizontal"
            className="flex-1"
            onLayout={handlePanelResizeUnselected}
          >
            {/* ãƒ¡ãƒ¢ãƒ‘ãƒãƒ« */}
            {showMemo && (
              <>
                <ResizablePanel
                  id="unselected-memo"
                  order={memoOrder}
                  defaultSize={sizes.memo}
                  minSize={25}
                  className="rounded-lg bg-white flex flex-col min-h-0 border-r border-gray-200"
                >
                  <div className="flex flex-col h-full pl-4 pr-2">
                    <BoardMemoSection
                      rightPanelMode={rightPanelMode}
                      showMemo={showMemo}
                      allMemoItems={allMemoItems}
                      memoItems={memoItems}
                      activeMemoTab={activeMemoTab}
                      normalMemoCount={normalMemoCount}
                      deletedMemoCount={deletedMemoCount}
                      showTabText={showTabText}
                      isLoading={isLoading}
                      effectiveColumnCount={effectiveColumnCount}
                      allTags={safeAllTags}
                      allBoards={safeAllBoards}
                      allTaggings={safeAllTaggings as Tagging[]}
                      allBoardItems={safeAllBoardItems}
                      allAttachments={allAttachments || []}
                      selectedTagIds={selectedTagIds}
                      tagFilterMode={tagFilterMode}
                      selectedMemo={selectedMemo}
                      boardId={boardId}
                      onCreateNewMemo={handleCreateNewMemo}
                      onSetRightPanelMode={setRightPanelMode}
                      onMemoTabChange={handleMemoTabChangeWithRefresh}
                      onSelectMemo={handleSelectMemo}
                      memoSelectionMode={selectionMode}
                      checkedMemos={checkedMemos}
                      onMemoSelectionToggle={handleMemoSelectionToggle}
                      onSelectAll={handleMemoSelectAll}
                      isAllSelected={isMemoAllSelected}
                      onBulkDelete={() => handleBulkDelete("memo")}
                      isDeleting={isMemoDeleting}
                      isLidOpen={isMemoLidOpen}
                      currentDisplayCount={currentMemoDisplayCount}
                      deleteButtonRef={deleteButtonRef}
                      onCheckedMemosChange={setCheckedMemos}
                      onTagging={handleTaggingMemo}
                    />
                  </div>
                </ResizablePanel>
                {showTask && <ResizableHandle />}
              </>
            )}

            {/* ã‚¿ã‚¹ã‚¯ãƒ‘ãƒãƒ« */}
            {showTask && (
              <ResizablePanel
                id="unselected-task"
                order={taskOrder}
                defaultSize={sizes.task}
                minSize={25}
                className="rounded-lg bg-white flex flex-col min-h-0"
              >
                <div className="flex flex-col h-full pl-4 pr-2">
                  <BoardTaskSection
                    boardId={boardId}
                    initialBoardId={boardId}
                    rightPanelMode={rightPanelMode}
                    showMemo={showMemo}
                    showTask={showTask}
                    allTaskItems={allTaskItems}
                    taskItems={taskItems}
                    activeTaskTab={activeTaskTab}
                    todoCount={todoCount}
                    inProgressCount={inProgressCount}
                    completedCount={completedCount}
                    deletedCount={deletedCount}
                    showTabText={showTabText}
                    isLoading={isLoading}
                    effectiveColumnCount={effectiveColumnCount}
                    selectedTagIds={selectedTagIds}
                    tagFilterMode={tagFilterMode}
                    allTags={safeAllTags}
                    allBoards={safeAllBoards}
                    allTaggings={safeAllTaggings as Tagging[]}
                    allBoardItems={safeAllBoardItems}
                    allAttachments={allAttachments || []}
                    selectedTask={selectedTask}
                    onCreateNewTask={handleCreateNewTask}
                    onSetRightPanelMode={setRightPanelMode}
                    onTaskTabChange={handleTaskTabChangeWithRefresh}
                    onSelectTask={handleSelectTask}
                    taskSelectionMode={selectionMode}
                    checkedTasks={checkedTasks}
                    onTaskSelectionToggle={handleTaskSelectionToggle}
                    onSelectAll={handleTaskSelectAll}
                    isAllSelected={isTaskAllSelected}
                    onBulkDelete={() => handleBulkDelete("task")}
                    isDeleting={isTaskDeleting}
                    isLidOpen={isTaskLidOpen}
                    currentDisplayCount={currentTaskDisplayCount}
                    deleteButtonRef={deleteButtonRef}
                    onCheckedTasksChange={setCheckedTasks}
                    onTagging={handleTaggingTask}
                  />
                </div>
              </ResizablePanel>
            )}
          </ResizablePanelGroup>
        );
      })()
    )}

    {/* å‰Šé™¤ãƒ¢ãƒ¼ãƒ€ãƒ«ä»¥é™ã¯ç¾åœ¨ã¨åŒã˜ */}
    <BulkDeleteConfirmation ... />
    <CSVImportModal ... />
    <TagAddModal ... />
  </div>
);
```

## âœ… æœŸå¾…ã•ã‚Œã‚‹æˆæœ

1. **å•é¡Œ1ã®è§£æ±º**: ã‚¢ã‚¤ãƒ†ãƒ é¸æŠæ™‚ã«é–¢é€£ã™ã‚‹ä¸€è¦§ã®ã¿è¡¨ç¤º
   - ãƒ¡ãƒ¢é¸æŠæ™‚ â†’ ãƒ¡ãƒ¢ä¸€è¦§ã®ã¿
   - ã‚¿ã‚¹ã‚¯é¸æŠæ™‚ â†’ ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã¿
   - rightPanelModeæ™‚ â†’ æŒ‡å®šã•ã‚ŒãŸä¸€è¦§ã®ã¿

2. **å•é¡Œ2ã®è§£æ±º**: ãƒ‘ãƒãƒ«å¹…ãŒãƒªã‚µã‚¤ã‚ºå¯èƒ½ã«
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ‰ãƒ©ãƒƒã‚°ã§ãƒ‘ãƒãƒ«å¹…ã‚’èª¿æ•´ã§ãã‚‹
   - è¨­å®šãŒlocalStorageã«ä¿å­˜ã•ã‚Œã€æ¬¡å›è¨ªå•æ™‚ã‚‚ä¿æŒã•ã‚Œã‚‹

3. **UXå‘ä¸Š**:
   - ãƒãƒ¼ãƒ å´ã¨å€‹äººå´ã§ä¸€è²«ã—ãŸæ“ä½œæ„Ÿ
   - ç”»é¢ãŒåºƒãä½¿ãˆã‚‹ï¼ˆä¸è¦ãªä¸€è¦§ãŒéè¡¨ç¤ºã«ãªã‚‹ï¼‰

## ğŸ§ª ãƒ†ã‚¹ãƒˆé …ç›®

1. **é¸æŠæ™‚ã®ä¸€è¦§åˆ‡ã‚Šæ›¿ãˆ**:
   - [ ] ãƒ¡ãƒ¢é¸æŠæ™‚ã€ãƒ¡ãƒ¢ä¸€è¦§ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹
   - [ ] ã‚¿ã‚¹ã‚¯é¸æŠæ™‚ã€ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹
   - [ ] rightPanelMode="memo-list" æ™‚ã€ãƒ¡ãƒ¢ä¸€è¦§ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹
   - [ ] rightPanelMode="task-list" æ™‚ã€ã‚¿ã‚¹ã‚¯ä¸€è¦§ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹

2. **éé¸æŠæ™‚ã®è¡¨ç¤º**:
   - [ ] ãƒ¡ãƒ¢ãƒ»ã‚¿ã‚¹ã‚¯ä¸¡æ–¹è¡¨ç¤ºã•ã‚Œã‚‹
   - [ ] showMemo/showTask ã®è¨­å®šã«å¿œã˜ã¦è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ

3. **ãƒªã‚µã‚¤ã‚ºæ©Ÿèƒ½**:
   - [ ] é¸æŠæ™‚ã€ä¸€è¦§ã¨è©³ç´°ã®å¢ƒç•Œã‚’ãƒ‰ãƒ©ãƒƒã‚°ã§ãƒªã‚µã‚¤ã‚ºã§ãã‚‹
   - [ ] éé¸æŠæ™‚ã€ãƒ¡ãƒ¢ã¨ã‚¿ã‚¹ã‚¯ã®å¢ƒç•Œã‚’ãƒ‰ãƒ©ãƒƒã‚°ã§ãƒªã‚µã‚¤ã‚ºã§ãã‚‹
   - [ ] ãƒªã‚µã‚¤ã‚ºå¾Œã€ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚å¹…ãŒä¿æŒã•ã‚Œã‚‹

4. **localStorage**:
   - [ ] `personal-board-panel-sizes-selected` ã«ä¿å­˜ã•ã‚Œã‚‹
   - [ ] `personal-board-panel-sizes-unselected` ã«ä¿å­˜ã•ã‚Œã‚‹
   - [ ] ãƒ‘ãƒãƒ«çµ„ã¿åˆã‚ã›ã”ã¨ã«æ­£ã—ãä¿å­˜ã•ã‚Œã‚‹

## ğŸ“Œ æ³¨æ„äº‹é …

- ãƒãƒ¼ãƒ å´ã¯ã‚³ãƒ¡ãƒ³ãƒˆãƒ‘ãƒãƒ«ãŒã‚ã‚‹ãŸã‚3ãƒ‘ãƒãƒ«ã€å€‹äººå´ã¯2ãƒ‘ãƒãƒ«
- rightPanelMode ã®æŒ™å‹•ã‚’å£Šã•ãªã„ã‚ˆã†æ³¨æ„
- æ—¢å­˜ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆå‰Šé™¤ã€CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆã€ã‚¿ã‚°è¿½åŠ ï¼‰ã¯å¤‰æ›´ãªã—
- BoardMemoSection/BoardTaskSection ã® props ã¯å¤‰æ›´ãªã—
